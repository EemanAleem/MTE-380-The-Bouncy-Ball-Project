#include <AccelStepper.h>
#include <MultiStepper.h>
const int dirPin1 = 2;
const int stepPin1 = 3; //pulsePin
const int enPin1 = 4;

const int dirPin2 = 5;
const int stepPin2 = 6; //pulsePin
const int enPin2 = 7;

const int dirPin3 = 8;
const int stepPin3 = 9; //pulsePin
const int enPin3 = 10;

AccelStepper stepper1(AccelStepper::FULL4WIRE, stepPin1, dirPin1);
AccelStepper stepper2(AccelStepper::FULL4WIRE, stepPin2, dirPin2);
AccelStepper stepper3(AccelStepper::FULL4WIRE, stepPin3, dirPin3);
MultiStepper steppers;

void setup() {
  Serial.begin(9600);
 //pinMode(stepPin1, OUTPUT);
  //pinMode(dirPin1, OUTPUT);
  pinMode(enPin1, OUTPUT);

  //pinMode(stepPin2, OUTPUT);
  //pinMode(dirPin2, OUTPUT);
  pinMode(enPin2, OUTPUT);

  //pinMode(stepPin3, OUTPUT);
  //pinMode(dirPin3, OUTPUT);
  pinMode(enPin3, OUTPUT);

  digitalWrite(enPin1, HIGH);        //sets the drivers off initially
  digitalWrite(enPin2, HIGH); 
  digitalWrite(enPin3, HIGH); 
  delay(1000);                
  digitalWrite(enPin1, LOW); //enables the driver
  digitalWrite(enPin2, LOW);
  digitalWrite(enPin3, LOW); 

}

void loop() {

  steppers.moveTo(50);
  steppers.runSpeedToPosition();
  
  long currentPosition1 = stepper1.currentPosition();
  Serial.print("Motor 1 position: ");
  Serial.println(currentPosition1);
  
  long currentPosition2 = stepper2.currentPosition();
  Serial.print("Motor 2 position: ");
  Serial.println(currentPosition2);
  
  long currentPosition3 = stepper3.currentPosition();
  Serial.print("Motor 3 position: ");
  Serial.println(currentPosition3);
  delay(2000);

  steppers.moveTo(0);

  steppers.runSpeedToPosition();

  Serial.print("Motor 1 position: ");
  Serial.println(currentPosition1);
  
  Serial.print("Motor 2 position: ");
  Serial.println(currentPosition2);
  
  Serial.print("Motor 3 position: ");
  Serial.println(currentPosition3);
  delay(2000);

}
